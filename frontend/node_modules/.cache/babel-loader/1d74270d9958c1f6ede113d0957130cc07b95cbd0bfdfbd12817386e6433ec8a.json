{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\aagnick\\\\Desktop\\\\study\\\\projects\\\\qrattend\\\\frontend\\\\src\\\\StudentAttendance.js\",\n  _s = $RefreshSig$();\nimport React, { useState, useEffect } from 'react';\nimport { useParams } from 'react-router-dom';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nfunction StudentAttendance() {\n  _s();\n  const {\n    sessionId\n  } = useParams();\n  const [studentName, setStudentName] = useState('');\n  const [sessionInfo, setSessionInfo] = useState(null);\n  const [message, setMessage] = useState('');\n  const [loading, setLoading] = useState(false);\n  useEffect(() => {\n    if (sessionId) {\n      fetchSessionInfo();\n    }\n  }, [sessionId]);\n  const fetchSessionInfo = async () => {\n    try {\n      const response = await fetch(`http://localhost:5000/api/session/${sessionId}`);\n      if (response.ok) {\n        const data = await response.json();\n        setSessionInfo(data);\n      } else {\n        setMessage('Invalid or expired session');\n      }\n    } catch (error) {\n      setMessage('Error fetching session info');\n    }\n  };\n  const markAttendance = async () => {\n    if (!studentName.trim()) {\n      setMessage('Please enter your name');\n      return;\n    }\n    setLoading(true);\n    navigator.geolocation.getCurrentPosition(async position => {\n      try {\n        const response = await fetch('http://localhost:5000/api/mark-attendance', {\n          method: 'POST',\n          headers: {\n            'Content-Type': 'application/json'\n          },\n          body: JSON.stringify({\n            sessionId,\n            studentName: studentName.trim(),\n            latitude: position.coords.latitude,\n            longitude: position.coords.longitude\n          })\n        });\n        const data = await response.json();\n        if (response.ok) {\n          setMessage(`✅ Attendance marked! Distance: ${data.distance}m`);\n        } else {\n          setMessage(`❌ ${data.error}`);\n        }\n      } catch (error) {\n        setMessage('❌ Error marking attendance');\n      }\n      setLoading(false);\n    }, error => {\n      setMessage('❌ Please enable location access');\n      setLoading(false);\n    });\n  };\n  if (!sessionId) {\n    return /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"container\",\n      children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n        children: \"Student Attendance\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 73,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n        children: \"Scan a QR code to mark attendance\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 74,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 72,\n      columnNumber: 7\n    }, this);\n  }\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"container\",\n    children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n      children: \"Mark Attendance\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 81,\n      columnNumber: 7\n    }, this), sessionInfo && /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"session-info\",\n      children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n        children: sessionInfo.className\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 85,\n        columnNumber: 11\n      }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n        children: [\"Teacher: \", sessionInfo.teacherName]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 86,\n        columnNumber: 11\n      }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n        children: [\"Expires: \", new Date(sessionInfo.expiresAt).toLocaleString()]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 87,\n        columnNumber: 11\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 84,\n      columnNumber: 9\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"form-group\",\n      children: [/*#__PURE__*/_jsxDEV(\"input\", {\n        type: \"text\",\n        placeholder: \"Enter your name\",\n        value: studentName,\n        onChange: e => setStudentName(e.target.value)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 92,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n        onClick: markAttendance,\n        disabled: loading,\n        className: \"attend-btn\",\n        children: loading ? 'Marking...' : 'Mark Attendance'\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 99,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 91,\n      columnNumber: 7\n    }, this), message && /*#__PURE__*/_jsxDEV(\"div\", {\n      className: `message ${message.includes('✅') ? 'success' : 'error'}`,\n      children: message\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 105,\n      columnNumber: 9\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 80,\n    columnNumber: 5\n  }, this);\n}\n_s(StudentAttendance, \"Rxx7OUgvLgfYCxDdR+OzHlZDwRs=\", false, function () {\n  return [useParams];\n});\n_c = StudentAttendance;\nexport default StudentAttendance;\nvar _c;\n$RefreshReg$(_c, \"StudentAttendance\");","map":{"version":3,"names":["React","useState","useEffect","useParams","jsxDEV","_jsxDEV","StudentAttendance","_s","sessionId","studentName","setStudentName","sessionInfo","setSessionInfo","message","setMessage","loading","setLoading","fetchSessionInfo","response","fetch","ok","data","json","error","markAttendance","trim","navigator","geolocation","getCurrentPosition","position","method","headers","body","JSON","stringify","latitude","coords","longitude","distance","className","children","fileName","_jsxFileName","lineNumber","columnNumber","teacherName","Date","expiresAt","toLocaleString","type","placeholder","value","onChange","e","target","onClick","disabled","includes","_c","$RefreshReg$"],"sources":["C:/Users/aagnick/Desktop/study/projects/qrattend/frontend/src/StudentAttendance.js"],"sourcesContent":["import React, { useState, useEffect } from 'react';\nimport { useParams } from 'react-router-dom';\n\nfunction StudentAttendance() {\n  const { sessionId } = useParams();\n  const [studentName, setStudentName] = useState('');\n  const [sessionInfo, setSessionInfo] = useState(null);\n  const [message, setMessage] = useState('');\n  const [loading, setLoading] = useState(false);\n\n  useEffect(() => {\n    if (sessionId) {\n      fetchSessionInfo();\n    }\n  }, [sessionId]);\n\n  const fetchSessionInfo = async () => {\n    try {\n      const response = await fetch(`http://localhost:5000/api/session/${sessionId}`);\n      if (response.ok) {\n        const data = await response.json();\n        setSessionInfo(data);\n      } else {\n        setMessage('Invalid or expired session');\n      }\n    } catch (error) {\n      setMessage('Error fetching session info');\n    }\n  };\n\n  const markAttendance = async () => {\n    if (!studentName.trim()) {\n      setMessage('Please enter your name');\n      return;\n    }\n\n    setLoading(true);\n    navigator.geolocation.getCurrentPosition(\n      async (position) => {\n        try {\n          const response = await fetch('http://localhost:5000/api/mark-attendance', {\n            method: 'POST',\n            headers: { 'Content-Type': 'application/json' },\n            body: JSON.stringify({\n              sessionId,\n              studentName: studentName.trim(),\n              latitude: position.coords.latitude,\n              longitude: position.coords.longitude\n            })\n          });\n\n          const data = await response.json();\n          if (response.ok) {\n            setMessage(`✅ Attendance marked! Distance: ${data.distance}m`);\n          } else {\n            setMessage(`❌ ${data.error}`);\n          }\n        } catch (error) {\n          setMessage('❌ Error marking attendance');\n        }\n        setLoading(false);\n      },\n      (error) => {\n        setMessage('❌ Please enable location access');\n        setLoading(false);\n      }\n    );\n  };\n\n  if (!sessionId) {\n    return (\n      <div className=\"container\">\n        <h2>Student Attendance</h2>\n        <p>Scan a QR code to mark attendance</p>\n      </div>\n    );\n  }\n\n  return (\n    <div className=\"container\">\n      <h2>Mark Attendance</h2>\n      \n      {sessionInfo && (\n        <div className=\"session-info\">\n          <h3>{sessionInfo.className}</h3>\n          <p>Teacher: {sessionInfo.teacherName}</p>\n          <p>Expires: {new Date(sessionInfo.expiresAt).toLocaleString()}</p>\n        </div>\n      )}\n\n      <div className=\"form-group\">\n        <input\n          type=\"text\"\n          placeholder=\"Enter your name\"\n          value={studentName}\n          onChange={(e) => setStudentName(e.target.value)}\n        />\n        \n        <button onClick={markAttendance} disabled={loading} className=\"attend-btn\">\n          {loading ? 'Marking...' : 'Mark Attendance'}\n        </button>\n      </div>\n\n      {message && (\n        <div className={`message ${message.includes('✅') ? 'success' : 'error'}`}>\n          {message}\n        </div>\n      )}\n    </div>\n  );\n}\n\nexport default StudentAttendance;"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}